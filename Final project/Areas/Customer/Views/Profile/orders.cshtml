@using Final_project.Services.Customer
@model PagedResult<order>
@{
    ViewData["Title"] = "Orders";
    var currentPage = (int)Model.PageNumber;
    var totalPages = (int)Model.TotalPages;
    var pageSize = (int)Model.PageSize;
    var sizeOptions = new[] { 2, 5, 10, 20, 50 };
}
<link href="/css/CustomerProfile.css" rel="stylesheet"/>

    <!-- Header (simplified) -->
    <header class="bg-dark py-2">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <a href="#" class="navbar-brand">
                    <img src="https://www.amazon.com/favicon.ico" alt="Amazon" height="30">
                </a>
                <div class="d-flex align-items-center">
                    <span class="text-white me-3">Hello, User</span>
                    <a href="#" class="text-white"><i class="fas fa-shopping-cart fa-lg"></i></a>
                </div>
            </div>
        </div>
    </header>

    <div class="container my-4">
        <div class="row">
            <!-- Left Sidebar Navigation -->
           <partial name="_SideBar"/>
            <!-- Main Content Area -->
            <div class="col-md-9">
                <div class="orders-container p-4">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h4><i class="fas fa-box-open amazon-orange me-2"></i> Your Orders</h4>
                        <div class="d-flex">
                            <input type="text" class="form-control me-2" placeholder="Search all orders" style="width: 250px;">
                            <button class="btn btn-amazon">Search Orders</button>
                        </div>
                    </div>

                    <!-- Order Filter -->
                    <div class="order-filter mb-4">
                        <div class="row">
                            <div class="col-md-3 mb-2">
                                <label class="form-label">Orders placed in</label>
                                <select class="form-select">
                                    <option>Last 30 days</option>
                                    <option>Last 3 months</option>
                                    <option>2023</option>
                                    <option>2022</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-2">
                                <label class="form-label">Order status</label>
                                <select class="form-select">
                                    <option>All orders</option>
                                    <option>Not yet shipped</option>
                                    <option>Delivered</option>
                                    <option>Cancelled</option>
                                </select>
                            </div>
                            <div class="col-md-6 d-flex align-items-end mb-2">
                                <button class="btn btn-outline-secondary me-2">Buy Again</button>
                                <button class="btn btn-outline-secondary me-2">Not Yet Shipped</button>
                                <button class="btn btn-outline-secondary">Cancelled Orders</button>
                            </div>
                        </div>
                    </div>

                    <!-- Order List -->
                    <div class="order-list">
                        <!-- Order  -->
                        @foreach(var order in Model.Items)
                        {
                        <div class="order-card">
                            <div class="order-header d-flex justify-content-between">
                                <div>
                                    <span class="fw-bold">ORDER PLACED</span><br>
                                    <span>@order.order_date?.ToString("dd,MMMM,yyyy")</span>
                                </div>
                                <div>
                                    <span class="fw-bold">TOTAL</span><br>
                                    <span>@order.total_amount?.ToString("C")</span>
                                </div>
                                <div>
                                    <span class="fw-bold">SHIP TO</span><br>
                                    <span>@order.Buyer.UserName</span>
                                </div>
                                <div>
                                    <span class="fw-bold">ORDER # @order.id</span><br>
                                    <a href="#" class="text-primary">Order Details</a>
                                </div>
                            </div>

                            <div class="order-status mb-3">
                                <span class="badge bg-success">Delivered on Jun 18, 2023</span>
                            </div>

                            <div class="row">
                                <div class="col-md-2">
                                    <img src="https://m.media-amazon.com/images/I/71h6PpGaz9L._AC_UL320_.jpg" class="order-product-img">
                                </div>
                                <div class="col-md-6">
                                    <h6>Amazon Echo Dot (4th Gen) - Smart speaker with Alexa - Charcoal</h6>
                                    <p class="text-muted">Sold by: Amazon.com</p>
                                    <p class="text-success">Your item was delivered</p>
                                </div>
                                <div class="col-md-4 text-end">
                                    <button class="btn btn-amazon mb-2">Buy it again</button>
                                    <button class="btn btn-outline-secondary">View your item</button>
                                    <div class="mt-2">
                                        <a href="#" class="text-primary">Leave seller feedback</a> |
                                        <a href="#" class="text-primary">Write a product review</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        }        
                       
                    
                    </div>

                <!-- Pagination -->
                <nav class="d-flex justify-content-between align-items-center my-4">
                    <div class="text-muted small">
                        Showing page @currentPage of @totalPages
                    </div>

                    <ul class="pagination amazon-pagination mb-0">
                        <li class="page-item @(currentPage == 1 ? "disabled" : "")">
                            <a class="page-link" href="?page=@(currentPage - 1)&size=@pageSize" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>

                        @if (totalPages == 0)
                        {
                            <li class="page-item disabled">
                                <a class="page-link">0</a>
                            </li>
                        }
                        else
                        {
                            <!-- Always show first page -->
                            <li class="page-item @(1 == currentPage ? "active" : "")">
                                <a class="page-link" href="?page=1&size=@pageSize">1</a>
                            </li>

                            @if (currentPage > 3)
                            {
                                <li class="page-item disabled">
                                    <span class="page-link">...</span>
                                </li>
                            }

                            @for (int i = Math.Max(2, currentPage - 1); i <= Math.Min(totalPages - 1, currentPage + 1); i++)
                            {
                                <li class="page-item @(i == currentPage ? "active" : "")">
                                    <a class="page-link" href="?page=@i&size=@pageSize">@i</a>
                                </li>
                            }

                            @if (currentPage < totalPages - 2)
                            {
                                <li class="page-item disabled">
                                    <span class="page-link">...</span>
                                </li>
                            }

                            @if (totalPages > 1)
                            {
                                <li class="page-item @(totalPages == currentPage ? "active" : "")">
                                    <a class="page-link" href="?page=@totalPages&size=@pageSize">@totalPages</a>
                                </li>
                            }
                        }

                        <li class="page-item @(currentPage == totalPages ? "disabled" : "")">
                            <a class="page-link" href="?page=@(currentPage + 1)&size=@pageSize" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                </div>
            </div>
        </div>
    </div>

   